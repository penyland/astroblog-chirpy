---
import { getCollection } from "astro:content";
import BlogPostCard from "./BlogPostCard.astro";

const allPosts = await getCollection("posts");
const sortedPosts = allPosts.sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
const { posts } = Astro.props;
---

<div class="max-w-5xl mx-auto">
  <ul class="grid grid-cols-2 gap-4 gap-y-12 lg:grid-cols-2 sm:grid-cols-1">
    {
      sortedPosts.map((post, i: number) => (
        <div class={i === 0 ? "col-span-2" : ""}>
          <BlogPostCard
            author={post.data.author}
            url={"/posts/" + post.id}
            title={post.data.title}
            description={post.data.description}
            date={post.data.date.toString().slice(0, 10)}
            coverImage={post.data.coverImage}
          />
        </div>
      ))
    }
  </ul>
</div>
